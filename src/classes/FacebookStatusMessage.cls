//
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//

public class FacebookStatusMessage {
	public String id {get;set;}
	public FacebookRef from_z {get;set;}
	public String message {get;set;}
	public String updated_time {get;set;}
	public FacebookLikes likes {get;set;}
	public FacebookComments comments {get;set;}
	public String type {get;set;}

	public FacebookStatusMessage(JSONParser parser) {
		while (parser.nextToken() != JSONToken.END_OBJECT) {
			if (parser.getCurrentToken() == JSONToken.FIELD_NAME) {
				String text = parser.getText();
				if (parser.nextToken() != JSONToken.VALUE_NULL) {
					if (text == 'id') {
						id = parser.getText();
					} else if (text == 'from') {
						from_z = new FacebookRef(parser);
					} else if (text == 'message') {
						message = parser.getText();
					} else if (text == 'updated_time') {
						updated_time = parser.getText();
					} else if (text == 'likes') {
						likes = new FacebookLikes(parser);
					} else if (text == 'comments') {
						comments = new FacebookComments(parser);
					} else if (text == 'type') {
						type = parser.getText();
						if (!type.equals('status')) {
							throw new FacebookException('FacebookStatusMessage found object type '+type+' - expected status');
						}
					} else {
						System.debug(LoggingLevel.WARN, 'FacebookStatusMessage consuming unrecognized property: '+text);
						FacebookUtil.consumeObject(parser);
					}
				}
			}
		}
	}
		
	public FacebookStatusMessage(String accessToken, String id, Map<String, String> params) {
		this(System.JSON.createParser(FacebookUtil.get(accessToken, id, params)));
	}
	
	public FacebookStatusMessage(String accessToken, String id) {
		this(accessToken, id, null);
	}
	
	public static FacebookStatusMessage parse(String json) {
		return new FacebookStatusMessage(System.JSON.createParser(json));
	}
	
	// This test method should give 100% coverage
	static testMethod void testParse() {
		String json = '{'+
		'  \"id\": \"10150224661566729\",'+
		'  \"from\": {'+
		'    \"name\": \"Facebook\",'+
		'    \"category\": \"Product/service\",'+
		'    \"id\": \"20531316728\"'+
		'  },'+
		'  \"message\": \"Tune in to Facebook Live today at 10 a.m. PDT to be part of a live announcement about new technology from Mark Zuckerberg, Facebook engineers and our industry partners: http://ow.ly/4vlzf\",'+
		'  \"updated_time\": \"2011-04-07T16:26:25+0000\",'+
		'  \"likes\": {'+
		'    \"data\": ['+
		'      {'+
		'        \"id\": \"100003041584765\",'+
		'        \"name\": \"Ar-raniry Muhammad\"'+
		'      },'+
		'      {'+
		'        \"id\": \"100001003048497\",'+
		'        \"name\": \"Khairil Seven Freaks\"'+
		'      }'+
		'    ],'+
		'    \"paging\": {'+
		'      \"next\": \"https://graph.facebook.com/10150224661566729/likes?method=GET&metadata=true&format=json&callback=___GraphExplorerAsyncCallback___&access_token=AAA&limit=25&offset=25&__after_id=100002227510322\"'+
		'    }'+
		'  },'+
		'  \"comments\": {'+
		'    \"data\": ['+
		'      {'+
		'        \"id\": \"10150224661566729_16455616\",'+
		'        \"from\": {'+
		'          \"name\": \"Abysheke Rajput\",'+
		'          \"id\": \"100001452433100\"'+
		'        },'+
		'        \"message\": \"yo....yeahhhhhhhhhhhhhhhhh\",'+
		'        \"created_time\": \"2011-04-07T16:26:44+0000\",'+
		'        \"likes\": 30'+
		'      },'+
		'      {'+
		'        \"id\": \"10150224661566729_16455618\",'+
		'        \"from\": {'+
		'          \"name\": \"Sophia Woodmansee\",'+
		'          \"id\": \"100000321901766\"'+
		'        },'+
		'        \"message\": \"oh....joy.\",'+
		'        \"created_time\": \"2011-04-07T16:26:47+0000\",'+
		'        \"likes\": 35'+
		'      }'+
		'    ],'+
		'    \"paging\": {'+
		'      \"next\": \"https://graph.facebook.com/10150224661566729/comments?method=GET&metadata=true&format=json&callback=___GraphExplorerAsyncCallback___&access_token=AAA&limit=25&offset=25&__after_id=10150224661566729_16455654\"'+
		'    }'+
		'  },'+
		'  \"type\": \"status\"'+
		'}';
		FacebookStatusMessage r = parse(json);
		System.assert(r != null);
		System.assert(r.id != null);
		System.assert(r.from_z != null);
		System.assert(r.message != null);
		System.assert(r.updated_time != null);
		System.assert(r.likes != null);
		System.assert(r.comments != null);
		System.assert(r.type != null);

		FacebookUtil.testmode = true;
		FacebookUtil.teststubresponse = json;
		r = new FacebookStatusMessage('TEST', 'TEST');
		System.assert(r != null);
		System.assert(r.id != null);
		System.assert(r.from_z != null);
		System.assert(r.message != null);
		System.assert(r.updated_time != null);
		System.assert(r.likes != null);
		System.assert(r.comments != null);
		System.assert(r.type != null);

		json = '{\"type\": \"test\" }';
		try {
			FacebookStatusMessage objRoot = new FacebookStatusMessage(System.JSON.createParser(json));
			System.assert(false);
		} catch (FacebookException fbe) {
			System.assertEquals(fbe.getMessage(), 'FacebookStatusMessage found object type test - expected status');
		}

		json = '{\"TestAMissingObject\": { \"TestAMissingArray\": [ { \"TestAMissingProperty\": \"Some Value\" } ] } }';
		FacebookStatusMessage objRoot = new FacebookStatusMessage(System.JSON.createParser(json));
		System.assert(objRoot != null);
		System.assert(objRoot.id == null);
		System.assert(objRoot.from_z == null);
		System.assert(objRoot.message == null);
		System.assert(objRoot.updated_time == null);
		System.assert(objRoot.likes == null);
		System.assert(objRoot.comments == null);
		System.assert(objRoot.type == null);
	}
}