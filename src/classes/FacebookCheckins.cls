//
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//

public class FacebookCheckins {
	public List<FacebookCheckin> data {get;set;}
	public FacebookPaging paging {get;set;}

	public FacebookCheckins(JSONParser parser) {
		while (parser.nextToken() != JSONToken.END_OBJECT) {
			if (parser.getCurrentToken() == JSONToken.FIELD_NAME) {
				String text = parser.getText();
				if (parser.nextToken() != JSONToken.VALUE_NULL) {
					if (text == 'data') {
						data = new List<FacebookCheckin>();
						while (parser.nextToken() != JSONToken.END_ARRAY) {
							data.add(new FacebookCheckin(parser));
						}
					} else if (text == 'paging') {
						paging = new FacebookPaging(parser);
					} else {
						System.debug(LoggingLevel.WARN, 'Root consuming unrecognized property: '+text);
						FacebookUtil.consumeObject(parser);
					}
				}
			}
		}
	}
	
	public FacebookCheckins(String accessToken, String id, Map<String, String> params) {
		this(System.JSON.createParser(FacebookUtil.get(accessToken, id, params)));
	}
	
	public FacebookCheckins(String accessToken, String id) {
		this(accessToken, id, null);
	}
		
	public static FacebookCheckins parse(String json) {
		return new FacebookCheckins(System.JSON.createParser(json));
	}
	
	public static FacebookCheckins search(String accessToken, Map<String, String> params) {
		if (params == null) {
			params = new Map<String, String>();
		}
		params.put('type', 'checkin');
		
		return new FacebookCheckins(System.JSON.createParser(FacebookUtil.get(accessToken, 'search', params)));
	}
	
	public static FacebookCheckins search(String accessToken) {
		return search(accessToken, null);
	}
	
	// This test method should give 100% coverage
	static testMethod void testParse() {
		String json = '{'+
		'  \"data\": ['+
		'    {'+
		'      \"id\": \"10150528710678056\",'+
		'      \"from\": {'+
		'        \"name\": \"Nick Tran\",'+
		'        \"id\": \"789353055\"'+
		'      },'+
		'      \"tags\": {'+
		'        \"data\": ['+
		'          {'+
		'            \"name\": \"Dave Carroll\",'+
		'            \"id\": \"525031753\"'+
		'          },'+
		'          {'+
		'            \"name\": \"Eddy Perez\",'+
		'            \"id\": \"528441062\"'+
		'          }'+
		'        ]'+
		'      },'+
		'      \"place\": {'+
		'        \"id\": \"80950130546\",'+
		'        \"name\": \"Hacker Dojo\",'+
		'        \"location\": {'+
		'          \"street\": \"140 South Whisman Road\",'+
		'          \"city\": \"Mountain View\",'+
		'          \"state\": \"CA\",'+
		'          \"country\": \"United States\",'+
		'          \"zip\": \"94041\",'+
		'          \"latitude\": 37.386691058043,'+
		'          \"longitude\": -122.0639506415'+
		'        }'+
		'      },'+
		'      \"application\": {'+
		'        \"name\": \"Facebook for iPad\",'+
		'        \"id\": \"173847642670370\"'+
		'      },'+
		'      \"created_time\": \"2011-11-11T03:57:41+0000\",'+
		'      \"likes\": {'+
		'        \"data\": ['+
		'          {'+
		'            \"id\": \"709783833\",'+
		'            \"name\": \"Jon Mountjoy\"'+
		'          }'+
		'        ],'+
		'        \"paging\": {'+
		'          \"next\": \"https://graph.facebook.com/10150528710678056/likes?method=GET&metadata=true&format=json&callback=___GraphExplorerAsyncCallback___&access_token=AAA&limit=25&offset=25&__after_id=709783833\"'+
		'        }'+
		'      }'+
		'    },'+
		'    {'+
		'      \"id\": \"10150166525137007\",'+
		'      \"from\": {'+
		'        \"name\": \"Katie O\'Brien Penn\",'+
		'        \"id\": \"593502006\"'+
		'      },'+
		'      \"tags\": {'+
		'        \"data\": ['+
		'          {'+
		'            \"name\": \"Pat Patterson\",'+
		'            \"id\": \"667905711\"'+
		'          },'+
		'          {'+
		'            \"name\": \"Quinton Wall\",'+
		'            \"id\": \"717838202\"'+
		'          }'+
		'        ]'+
		'      },'+
		'      \"message\": \"Getting ready for our Cinco de Mayo Meetup!\",'+
		'      \"place\": {'+
		'        \"id\": \"198949966813224\",'+
		'        \"name\": \"San Mateo Force.com Dev Meetup\",'+
		'        \"location\": {'+
		'          \"latitude\": 37.555341805,'+
		'          \"longitude\": -122.29883780562'+
		'        }'+
		'      },'+
		'      \"application\": {'+
		'        \"name\": \"Facebook for iPhone\",'+
		'        \"canvas_name\": \"fbtouch\",'+
		'        \"namespace\": \"fbtouch\",'+
		'        \"id\": \"6628568379\"'+
		'      },'+
		'      \"created_time\": \"2011-05-06T00:03:19+0000\"'+
		'    }'+
		'  ],'+
		'  \"paging\": {'+
		'    \"previous\": \"https://graph.facebook.com/me/checkins?format=json&limit=25&since=1320983861&__paging_token=10150528710678056&__previous=1\",'+
		'    \"next\": \"https://graph.facebook.com/me/checkins?format=json&limit=25&until=1304640199&__paging_token=10150166525137007\"'+
		'  }'+
		'}';
		FacebookCheckins r = parse(json);
		System.assert(r != null);
		System.assert(r.data != null);
		System.assert(r.paging != null);

		FacebookUtil.testmode = true;
		FacebookUtil.teststubresponse = json;
		r = new FacebookCheckins('TEST', 'TEST');
		System.assert(r != null);

		r = search('TEST');
		System.assert(r != null);
		System.assert(r.data != null);
		System.assert(r.paging != null);

		json = '{\"TestAMissingObject\": { \"TestAMissingArray\": [ { \"TestAMissingProperty\": \"Some Value\" } ] } }';
		FacebookCheckins objRoot = new FacebookCheckins(System.JSON.createParser(json));
		System.assert(objRoot != null);
		System.assert(objRoot.data == null);
		System.assert(objRoot.paging == null);		
	}
}