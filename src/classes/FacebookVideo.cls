//
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//

public class FacebookVideo {
	public class Format {
		public String embed_html {get;set;}
		public Integer width {get;set;}
		public Integer height {get;set;}
		public String filter {get;set;}
		public String picture {get;set;}

		public Format(JSONParser parser) {
			while (parser.nextToken() != JSONToken.END_OBJECT) {
				if (parser.getCurrentToken() == JSONToken.FIELD_NAME) {
					String text = parser.getText();
					if (parser.nextToken() != JSONToken.VALUE_NULL) {
						if (text == 'embed_html') {
							embed_html = parser.getText();
						} else if (text == 'width') {
							width = parser.getIntegerValue();
						} else if (text == 'height') {
							height = parser.getIntegerValue();
						} else if (text == 'filter') {
							filter = parser.getText();
						} else if (text == 'picture') {
							picture = parser.getText();
						} else {
							System.debug(LoggingLevel.WARN, 'Format consuming unrecognized property: '+text);
							FacebookUtil.consumeObject(parser);
						}
					}
				}
			}
		}
	}
	
	public String id {get;set;}
	public FacebookRef from_z {get;set;}
	public List<FacebookRef> tags {get;set;} 
	public String name {get;set;}
	public String description {get;set;}
	public String picture {get;set;}
	public String embed_html {get;set;}
	public String icon {get;set;}
	public String source {get;set;}
	public String created_time {get;set;}
	public String updated_time {get;set;}
	public List<Format> format {get;set;}
	public FacebookComments comments {get;set;}
	public String type {get;set;}

	public FacebookVideo(JSONParser parser) {
		while (parser.nextToken() != JSONToken.END_OBJECT) {
			if (parser.getCurrentToken() == JSONToken.FIELD_NAME) {
				String text = parser.getText();
				if (parser.nextToken() != JSONToken.VALUE_NULL) {
					if (text == 'id') {
						id = parser.getText();
					} else if (text == 'from') {
						from_z = new FacebookRef(parser);
					} else if (text == 'tags') {
						tags = new List<FacebookRef>();
						while (parser.nextToken() != JSONToken.END_ARRAY) {
							tags.add(new FacebookRef(parser));
						}
					} else if (text == 'name') {
						name = parser.getText();
					} else if (text == 'description') {
						description = parser.getText();
					} else if (text == 'picture') {
						picture = parser.getText();
					} else if (text == 'embed_html') {
						embed_html = parser.getText();
					} else if (text == 'icon') {
						icon = parser.getText();
					} else if (text == 'source') {
						source = parser.getText();
					} else if (text == 'created_time') {
						created_time = parser.getText();
					} else if (text == 'updated_time') {
						updated_time = parser.getText();
					} else if (text == 'format') {
						format = new List<Format>();
						while (parser.nextToken() != JSONToken.END_ARRAY) {
							format.add(new Format(parser));
						}
					} else if (text == 'comments') {
						comments = new FacebookComments(parser);
					} else if (text == 'type') {
						type = parser.getText();
						if (!type.equals('video')) {
							throw new FacebookException('FacebookVideo found object type '+type+' - expected video');
						}
					} else {
						System.debug(LoggingLevel.WARN, 'Root consuming unrecognized property: '+text);
						FacebookUtil.consumeObject(parser);
					}
				}
			}
		}
	}
	
	public FacebookVideo(String accessToken, String id, Map<String, String> params) {
		this(System.JSON.createParser(FacebookUtil.get(accessToken, id, params)));
	}
	
	public FacebookVideo(String accessToken, String id) {
		this(accessToken, id, null);
	}
	
	public static FacebookVideo parse(String json) {
		return new FacebookVideo(System.JSON.createParser(json));
	}
	
	// This test method should give 100% coverage
	static testMethod void testParse() {
		String json = '{'+
		'  \"id\": \"2031763147233\",'+
		'  \"from\": {'+
		'    \"name\": \"Facebook\",'+
		'    \"category\": \"Product/service\",'+
		'    \"id\": \"20531316728\"'+
		'  },'+
		'  \"name\": \"Facebook Video Calling\",'+
		'  \"description\": \"Bring your conversations to life on Facebook. With face-to-face video calling, now you can watch your friends smile, wink and LOL.\\n\\nTo get started, visit http://www.facebook.com/videocalling\",'+
		'  \"picture\": \"https://s-hvthumb-ash4.fbcdn.net/245689_2031771547443_2031763147233_49428_1036_t.jpg\",'+
		'  \"embed_html\": \"<object width=\\\"400\\\" height=\\\"300\\\" ><param name=\\\"allowfullscreen\\\" value=\\\"true\\\" /><param name=\\\"movie\\\" value=\\\"http://www.facebook.com/v/2031763147233\\\" /><embed src=\\\"http://www.facebook.com/v/2031763147233\\\" type=\\\"application/x-shockwave-flash\\\" allowfullscreen=\\\"true\\\" width=\\\"400\\\" height=\\\"300\\\"></embed></object>\",'+
		'  \"icon\": \"https://s-static.ak.facebook.com/rsrc.php/v1/yD/r/DggDhA4z4tO.gif\",'+
		'  \"source\": \"https://fbcdn-video-a.akamaihd.net/cfs-ak-ash4/232134/485/2031763147233_48854.mp4?oh=70f7605a0b5a3648f096d030638d36af&oe=4F1C4F00&__gda__=1327255296_3b17f18ee7c657c9af8992fa752b3a0e\",'+
		'  \"created_time\": \"2011-07-05T18:13:26+0000\",'+
		'  \"updated_time\": \"2011-07-05T18:13:26+0000\",'+
		'  \"format\": ['+
		'    {'+
		'      \"embed_html\": \"<object width=\\\"130\\\" height=\\\"98\\\" ><param name=\\\"allowfullscreen\\\" value=\\\"true\\\" /><param name=\\\"movie\\\" value=\\\"http://www.facebook.com/v/2031763147233\\\" /><embed src=\\\"http://www.facebook.com/v/2031763147233\\\" type=\\\"application/x-shockwave-flash\\\" allowfullscreen=\\\"true\\\" width=\\\"130\\\" height=\\\"98\\\"></embed></object>\",'+
		'      \"width\": 130,'+
		'      \"height\": 98,'+
		'      \"filter\": \"130x130\",'+
		'      \"picture\": \"https://s-hvthumb-ash4.fbcdn.net/s130x130/245689_2031771547443_2031763147233_49428_1036_t.jpg\"'+
		'    },'+
		'    {'+
		'      \"embed_html\": \"<object width=\\\"480\\\" height=\\\"360\\\" ><param name=\\\"allowfullscreen\\\" value=\\\"true\\\" /><param name=\\\"movie\\\" value=\\\"http://www.facebook.com/v/2031763147233\\\" /><embed src=\\\"http://www.facebook.com/v/2031763147233\\\" type=\\\"application/x-shockwave-flash\\\" allowfullscreen=\\\"true\\\" width=\\\"480\\\" height=\\\"360\\\"></embed></object>\",'+
		'      \"width\": 480,'+
		'      \"height\": 360,'+
		'      \"filter\": \"480x480\",'+
		'      \"picture\": \"https://s-hvthumb-ash4.fbcdn.net/s480x480/245689_2031771547443_2031763147233_49428_1036_b.jpg\"'+
		'    }'+
		'  ],'+
		'  \"comments\": {'+
		'    \"data\": ['+
		'      {'+
		'        \"id\": \"2031763147233_1791429\",'+
		'        \"from\": {'+
		'          \"name\": \"Robin Rin Parkinson\",'+
		'          \"id\": \"100000474815248\"'+
		'        },'+
		'        \"message\": \"AAH SCARY DOG#\",'+
		'        \"created_time\": \"2011-07-06T17:30:44+0000\",'+
		'        \"likes\": 5'+
		'      },'+
		'      {'+
		'        \"id\": \"2031763147233_1791430\",'+
		'        \"from\": {'+
		'          \"name\": \"Joel Braswell\",'+
		'          \"id\": \"27403694\"'+
		'        },'+
		'        \"message\": \"This. Changes. Everything. :)\",'+
		'        \"created_time\": \"2011-07-06T17:30:48+0000\",'+
		'        \"likes\": 28'+
		'      }'+
		'    ],'+
		'    \"paging\": {'+
		'      \"next\": \"https://graph.facebook.com/2031763147233/comments?method=GET&metadata=true&format=json&callback=___GraphExplorerAsyncCallback___&access_token=AAA&limit=25&offset=25&__after_id=2031763147233_1791486\"'+
		'    }'+
		'  },'+
		'  \"type\": \"video\"'+
		'}';
		FacebookVideo r = parse(json);
		System.assert(r != null);
		System.assert(r.id != null);
		System.assert(r.from_z != null);
		System.assert(r.name != null);
		System.assert(r.description != null);
		System.assert(r.picture != null);
		System.assert(r.embed_html != null);
		System.assert(r.icon != null);
		System.assert(r.source != null);
		System.assert(r.created_time != null);
		System.assert(r.updated_time != null);
		System.assert(r.format != null);
		System.assert(r.comments != null);
		System.assert(r.type != null);

		FacebookUtil.testmode = true;
		FacebookUtil.teststubresponse = json;
		r = new FacebookVideo('TEST', 'TEST');
		System.assert(r != null);
		System.assert(r.id != null);
		System.assert(r.from_z != null);
		System.assert(r.name != null);
		System.assert(r.description != null);
		System.assert(r.picture != null);
		System.assert(r.embed_html != null);
		System.assert(r.icon != null);
		System.assert(r.source != null);
		System.assert(r.created_time != null);
		System.assert(r.updated_time != null);
		System.assert(r.format != null);
		System.assert(r.comments != null);
		System.assert(r.type != null);

		json = '{\"type\": \"test\" }';
		try {
			FacebookVideo objRoot = new FacebookVideo(System.JSON.createParser(json));
			System.assert(false);
		} catch (FacebookException fbe) {
			System.assertEquals(fbe.getMessage(), 'FacebookVideo found object type test - expected video');
		}

		json = '{\"TestAMissingObject\": { \"TestAMissingArray\": [ { \"TestAMissingProperty\": \"Some Value\" } ] } }';
		Format objFormat = new Format(System.JSON.createParser(json));
		System.assert(objFormat != null);
		System.assert(objFormat.embed_html == null);
		System.assert(objFormat.width == null);
		System.assert(objFormat.height == null);
		System.assert(objFormat.filter == null);
		System.assert(objFormat.picture == null);

		json = '{\"TestAMissingObject\": { \"TestAMissingArray\": [ { \"TestAMissingProperty\": \"Some Value\" } ] } }';
		FacebookVideo objRoot = new FacebookVideo(System.JSON.createParser(json));
		System.assert(objRoot != null);
		System.assert(objRoot.id == null);
		System.assert(objRoot.from_z == null);
		System.assert(objRoot.name == null);
		System.assert(objRoot.description == null);
		System.assert(objRoot.picture == null);
		System.assert(objRoot.embed_html == null);
		System.assert(objRoot.icon == null);
		System.assert(objRoot.source == null);
		System.assert(objRoot.created_time == null);
		System.assert(objRoot.updated_time == null);
		System.assert(objRoot.format == null);
		System.assert(objRoot.comments == null);
		System.assert(objRoot.type == null);
	}
}